(function(t){function e(e){for(var a,o,i=e[0],u=e[1],c=e[2],l=0,d=[];l<i.length;l++)o=i[l],s[o]&&d.push(s[o][0]),s[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var i=n[o];0!==s[i]&&(a=!1)}a&&(r.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},o={app:0},s={app:0},r=[];function i(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-2f141ab3":"1f48c4d2","chunk-9f0ed388":"c95bd4e7","chunk-d239c93e":"140258e5"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-2f141ab3":1,"chunk-9f0ed388":1,"chunk-d239c93e":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-2f141ab3":"7ced67d1","chunk-9f0ed388":"23b31947","chunk-d239c93e":"c8e0e4b7"}[t]+".css",o=u.p+a,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var i=s[r],c=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(c===a||c===o))return e()}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){i=l[r],c=i.getAttribute("data-href");if(c===a||c===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var a=e&&e.target&&e.target.src||o,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.request=a,n(s)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[t]=0}));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise(function(e,n){a=s[t]=[e,n]});e.push(a[2]=r);var c,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=i(t),c=function(e){d.onerror=d.onload=null,clearTimeout(p);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}s[t]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,l.appendChild(d)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("1d50")},"0544":function(t,e,n){"use strict";var a=n("6338"),o=n.n(a);o.a},"1d50":function(t,e,n){"use strict";n.r(e);n("dd5c"),n("9cf8"),n("a66e");var a=n("e832"),o=n("7338"),s=n.n(o),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},i=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[0==this.is_login&&"login"!=this.$route.name?n("button",{on:{click:t.login}},[t._v("登录")]):t._e(),0==this.is_login&&"register"!=this.$route.name?n("button",{on:{click:t.register}},[t._v("注册")]):t._e(),1==this.is_login?n("button",{on:{click:t.logout}},[t._v("退出")]):t._e(),1==this.is_login?n("button",{on:{click:t.post_create}},[t._v("写微博")]):t._e()])},c=[],l=n("3ad1"),d=n("94ea"),p={name:"Header",methods:Object(l["a"])({},Object(d["b"])(["updateIsLogin"]),{login:f,register:_,logout:h,post_create:g}),computed:Object(d["c"])(["is_login"])};function f(){this.$router.push({path:"/login"})}function _(){this.$router.push({path:"/register"})}function h(){this.updateIsLogin(!1),document.cookie="Authorization=; expires=Thu, 01-Jan-70 00:00:01 GMT",window.location.reload()}function g(){this.$router.push({path:"/post/create"})}var v=p,m=(n("a6f3"),n("a6c2")),b=Object(m["a"])(v,u,c,!1,null,"64e72d00",null);b.options.__file="Header.vue";var k=b.exports,y={name:"App",components:{Header:k}},w=y,j=Object(m["a"])(w,r,i,!1,null,null,null);j.options.__file="App.vue";var O=j.exports,C=n("4af9"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PostList")],1)},$=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center"},[n("div",{staticClass:"count"},[n("div",[n("p",[t._v("你好 "),n("span",{staticClass:"posts_count"},[t._v(t._s(t.user_name))])])]),n("div",[n("p",[t._v("微博 "),n("span",{staticClass:"posts_count"},[t._v(t._s(t.posts_count))])])]),n("div",[n("p",[t._v("关注 "),n("span",{staticClass:"follows_count"},[t._v(t._s(t.follows_count))])])]),n("div",[n("p",[t._v("粉丝 "),n("span",{staticClass:"fans_count"},[t._v(t._s(t.fans_count))])])]),n("div",[n("p",[n("a",{staticClass:"message",attrs:{href:t.message_url}},[t._v("消息")]),n("span",{staticClass:"messages_count"},[t._v(" "+t._s(t.messages_count))])])])]),n("div",{staticClass:"post"},[n("ul",t._l(t.posts,function(e){return n("li",{key:e.id,staticClass:"post",attrs:{"data-id":e.id}},[n("div",{staticStyle:{border:"black","border-style":"solid"}},[n("div",[t._v("\n                        用户名: "+t._s(e.user_name)+"\n                        "),t.user_id!=e.user_id?n("button",{attrs:{"data-user-id":e.user_id},on:{click:function(e){return e.stopPropagation(),t.follow(e)}}},[t._v("关注")]):t._e()]),n("div",[t._v("\n                        内容： "+t._s(e.content)+"\n                    ")]),n("div",[t._v("\n                        点赞数: "),n("span",{attrs:{id:"likes-count-"+e.id}},[t._v(t._s(t.likes_counts[e.id]))])]),t.user_id!=e.user_id?n("div",[n("button",{staticClass:"like",attrs:{"data-user-id":e.user_id,"data-post-id":e.id},on:{click:function(e){return e.stopPropagation(),t.like(e)}}},[t._v("赞")])]):t._e()])])}))])])},E=[],A={name:"PostList",data:function(){return{posts_count:0,follows_count:0,fans_count:0,messages_count:0,posts:{},likes_counts:{},user_id:0,user_name:"",message_url:"",current_page:1,page_count:1}},mounted:function(){var t=this,e="http://localhost:8000/v1/",n=1;console.log(this),this.$http.post(e,{page:n}).then(function(e){console.log(e.data),t.posts_count=e.data.data.posts_count,t.follows_count=e.data.data.follows_count,t.fans_count=e.data.data.fans_count,t.messages_count=e.data.data.messages_count,t.posts=e.data.data.posts,t.likes_counts=e.data.data.likes_counts,t.user_id=e.data.data.user_id,t.user_name=e.data.data.user_name,t.message_url=e.data.data.message_url,t.current_page=e.data.data.current_page,t.page_count=e.data.data.page_count,t.updateIsLogin(e.data.data.is_login)})},computed:Object(l["a"])({},Object(d["c"])(["is_login"])),methods:Object(l["a"])({},Object(d["b"])(["updateIsLogin"]),{follow:function(t){var e=this,n="http://localhost:8000/v1/follow";this.$http.post(n,{followed_id:parseInt(t.target.getAttribute("data-user-id"))}).then(function(t){0==t.data.code?(console.log(t.data),e.follows_count++,alert("关注成功"),e.$router.push({path:"/"})):alert("code:"+t.data.code+"  message:"+t.data.message+t.data.data)})},like:function(t){var e="http://localhost:8000/v1/like";this.$http.post(e,{to_user_id:parseInt(t.target.getAttribute("data-user-id")),post_id:parseInt(t.target.getAttribute("data-post-id"))}).then(function(e){if(0==e.data.code){var n=t.target.getAttribute("data-post-id"),a="likes-count-"+n,o=document.getElementById(a).textContent;document.getElementById(a).textContent=parseInt(o)+1,alert("点赞成功")}else alert("code:"+e.data.code+"  message:"+e.data.message+e.data.data)})}})},I=A,L=(n("0544"),Object(m["a"])(I,x,E,!1,null,"560263e9",null));L.options.__file="PostList.vue";var T=L.exports,S={name:"home",components:{PostList:T}},B=S,H=Object(m["a"])(B,P,$,!1,null,null,null);H.options.__file="Home.vue";var M=H.exports;a["a"].use(C["a"]);var N=new C["a"]({mode:"history",routes:[{path:"/",name:"home",component:M},{path:"/login",name:"login",component:function(){return n.e("chunk-2f141ab3").then(n.bind(null,"5311"))}},{path:"/register",name:"register",component:function(){return n.e("chunk-9f0ed388").then(n.bind(null,"2e7e"))}},{path:"/post/create",name:"post_create",component:function(){return n.e("chunk-d239c93e").then(n.bind(null,"9c23"))}}]});a["a"].use(d["a"]);var J=new d["a"].Store({state:{is_login:!1},mutations:{updateIsLogin:function(t,e){t.is_login=e}}});a["a"].config.productionTip=!1,a["a"].prototype.$http=s.a,s.a.defaults.headers["Access-Control-Allow-Credentials"]=!0,new a["a"]({router:N,store:J,render:function(t){return t(O)}}).$mount("#app")},6338:function(t,e,n){},"86c2":function(t,e,n){},a6f3:function(t,e,n){"use strict";var a=n("86c2"),o=n.n(a);o.a}});
//# sourceMappingURL=app.a3564e6e.js.map